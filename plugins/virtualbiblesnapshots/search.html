<!-- plugins/virtualbiblesnapshots/search.html -->
<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Virtual Bible Snapshot Project</title>
  <style>
    :root { --vbs-left-offset: 0px; }
    body { font-family: system-ui, sans-serif; background:#111;color:#eee; margin:0; }
    header { 
      padding:12px 16px; 
      background:#222; 
      display:flex; 
      gap:12px; 
      align-items:center; 
      position:fixed; top:0;
      left: var(--vbs-left-offset);
      right: 0;
      box-sizing: border-box;
      z-index: 10;
    }
    .header-left { display:flex; gap:12px; align-items:center; flex:1; min-width:0; }
    .header-right { display:flex; align-items:center; justify-content:flex-end; }
    .header2 {
      position: relative;
      top: 60px;
      margin-left: var(--vbs-left-offset);
      width: calc(100% - var(--vbs-left-offset));
      box-sizing: border-box;
      z-index: 10;
      background-color: #111;
      padding: 12px 16px;
      height: 28px;
    }
    #search-suggest {
      position: fixed;
      top: 60px;
      right: 0px;
      z-index: 10;
      padding: 12px 16px;
      height: 28px;
      text-align: right;
    }
    #content {
      padding-top: 70px;
      margin-left: var(--vbs-left-offset);
    }
    #folder-toolbar {
      background: #141414;
      border-bottom: 1px solid #222;
      padding: 8px 16px;
      display: none;
      flex-direction: column;
      gap: 8px;
      margin-bottom: 8px;
    }
    .folder-path {
      display: flex;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
    }
    .folder-current {
      color: #ccc;
      font-size: 13px;
    }
    .folder-list {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }
    .folder-button {
      background: #222;
      color: #ddd;
      border: 1px solid #333;
      padding: 4px 8px;
      cursor: pointer;
      border-radius: 4px;
    }
    .folder-button:hover {
      background: #2f2f2f;
    }
    input, select, label { font-size:14px; }
    #q { width: 28rem; max-width: 60vw; }
    #grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: 12px;
      padding: 12px 16px 16px;
    }
    .card {
      width: 100%;
      aspect-ratio: 1 / 1;
      background: linear-gradient(180deg, #303030 0%, #242424 100%);
      border: 1px solid #383838;
      border-radius: 14px;
      overflow: hidden;
      position: relative;
      cursor: pointer;
      transition: transform 160ms ease, box-shadow 160ms ease, border-color 160ms ease;
    }
    .card:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 22px rgba(0,0,0,0.35);
      border-color: #5a5a5a;
    }
    .card img {
      width: 100%;
      height: 100%;
      position: absolute;
      top: 0;
      left: 0;
      object-fit: cover;
      transform: scale(1);
      transform-origin: center;
      transition: transform 220ms ease;
    }
    .card:hover img {
      transform: scale(1.06);
    }
    .video-badge { position:absolute; bottom:6px; right:8px; background:#0009; padding:2px 6px; border-radius:4px; }
    .footer { padding:10px 16px; background:#181818; display:flex; gap:12px; align-items:center; border-top:1px solid #222; }
    small.muted { color:#aaa; }

    .mode-btn {
      background: #333;
      color: #eee;
      border: 1px solid #555;
      padding: 6px 10px;
      cursor: pointer;
    }
    .mode-btn:hover {
      background: #444;
    }
    .mode-btn.active {
      background: #0a84ff; /* Blue highlight */
      border-color: #0a84ff;
      color: white;
    }
    .settings-wrap { position: relative; }
    .settings-btn {
      background:#333;
      border:1px solid #555;
      color:#eee;
      padding:6px 8px;
      cursor:pointer;
      border-radius:6px;
      display:flex;
      align-items:center;
      justify-content:center;
      width:34px;
      height:30px;
    }
    .settings-btn svg { width:18px; height:18px; fill: currentColor; }
    .help-btn {
      background:#333;
      border:1px solid #555;
      color:#eee;
      padding:6px 8px;
      cursor:pointer;
      border-radius:6px;
      display:flex;
      align-items:center;
      justify-content:center;
      width:34px;
      height:30px;
      margin-left: 8px;
    }
    .help-btn:hover {
      background:#444;
    }
    .settings-menu {
      position:absolute;
      right:0;
      top:40px;
      background:#1d1d1d;
      border:1px solid #333;
      border-radius:8px;
      padding:10px 12px;
      min-width:220px;
      box-shadow:0 8px 24px rgba(0,0,0,0.35);
      display:none;
      z-index: 20;
    }
    .settings-menu.open { display:block; }
    .settings-group { display:flex; flex-direction:column; gap:6px; margin-bottom:10px; }
    .settings-title { color:#aaa; font-size:12px; text-transform:uppercase; letter-spacing:0.04em; }
    .settings-menu label { display:flex; gap:6px; align-items:center; }

  </style>
  <link rel="stylesheet" href="/admin/sidebar.css" />
</head>
<body>
  <header>
    <div class="header-left">
      <input id="q" placeholder="Search..." />
      <select id="typefilter"><option value="">Filter by Type</option></select>
      <select id="collectionfilter"><option value="">Collection</option></select>
    </div>
    <div class="header-right">
      <div class="settings-wrap">
        <button class="settings-btn" id="settings-toggle" type="button" aria-haspopup="true" aria-expanded="false" aria-label="Search options">
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <path d="M19.14 12.94a7.97 7.97 0 0 0 .05-.94 7.97 7.97 0 0 0-.05-.94l2.03-1.58a.5.5 0 0 0 .12-.64l-1.92-3.32a.5.5 0 0 0-.6-.22l-2.39.96a7.6 7.6 0 0 0-1.63-.94l-.36-2.54a.5.5 0 0 0-.5-.42h-3.84a.5.5 0 0 0-.5.42l-.36 2.54c-.58.23-1.12.53-1.63.94l-2.39-.96a.5.5 0 0 0-.6.22L2.7 8.84a.5.5 0 0 0 .12.64l2.03 1.58a7.97 7.97 0 0 0-.05.94c0 .32.02.63.05.94L2.82 14.52a.5.5 0 0 0-.12.64l1.92 3.32a.5.5 0 0 0 .6.22l2.39-.96c.51.41 1.05.72 1.63.94l.36 2.54a.5.5 0 0 0 .5.42h3.84a.5.5 0 0 0 .5-.42l.36-2.54c.58-.23 1.12-.53 1.63-.94l2.39.96a.5.5 0 0 0 .6-.22l1.92-3.32a.5.5 0 0 0-.12-.64l-2.03-1.58ZM12 15.5A3.5 3.5 0 1 1 12 8a3.5 3.5 0 0 1 0 7.5Z" />
          </svg>
        </button>
        <div class="settings-menu" id="settings-menu" role="menu" aria-label="Search options">
          <div class="settings-group">
            <span class="settings-title">Sort</span>
            <label><input type="radio" name="sort" value="path"> Folder</label>
            <label><input type="radio" name="sort" value="date" checked> Newest</label>
            <label><input type="radio" name="sort" value="random"> Random</label>
          </div>
          <div class="settings-group">
            <span class="settings-title">Filters</span>
            <label><input type="checkbox" id="showall"> Show all hits</label>
            <label><input type="checkbox" id="filterxx" checked> Filter “XX”</label>
          </div>
        </div>
      </div>
      <button class="help-btn" id="help-btn" type="button" title="Help">❔</button>
    </div>
  </header>
  <div class="header2">
    <span id="insert-buttons">
      <button id="mode-remote" class="mode-btn">Insert as remote image</button>
      <button id="mode-inline" class="mode-btn">Download to presentation folder & insert</button>
      <button id="mode-media" class="mode-btn">Download to _media & insert</button><br />
      <small class="muted">Tip: Use presentation folder for small images and _media folder for shared backgrounds.</small>
    </span>
    <span id="library-only-buttons" style="display: none;">
      <button id="save-to-media">Save to Media Library</button>
    </span>
  </div>
  <div id="content">
    <div id="folder-toolbar">
      <div class="folder-path">
        <button class="folder-button" type="button" id="folder-up">Up</button>
        <span class="folder-current" id="folder-current">All Folders</span>
      </div>
      <div class="folder-list" id="folder-list"></div>
    </div>
    <div id="grid">Loading…</div>
  </div>




  <script type="module" src="./search.js"></script>
  <script src="/admin/sidebar.js"></script>
</body>
</html>
