<!-- plugins/mediafx/ui.html -->
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Media Conversion &amp; Effects</title>
  <link rel="stylesheet" href="/admin/sidebar.css" />
  <link rel="stylesheet" href="ui.css" />
</head>
<body>
  <div id="app">

    <!-- Central effect panel -->
    <main id="effect-panel">
      <h1>Media Transform &amp; Effects</h1>
      <section id="global-effect-options">
        <div id="preset-controls" style="margin-bottom: 0.6em;">
          <button id="preset-gallery" type="button">Preset Gallery</button>
          <button id="load-preset" type="button">Load Preset</button>
          <button id="save-preset" type="button">Save Preset</button>
          <button id="reset-settings" type="button">Reset Settings</button>
        </div>
        <h2>Global Effect Options</h2>
        <label>
          Preset Title
          <input type="text" id="preset-title" placeholder="My preset" />
        </label>
        <label>
          Fade (seconds)
          <input type="number" id="output-fade" min="0" step="0.1" value="0.0" />
        </label>
        <label>
          Warmup (seconds)
          <input type="number" id="global-warmup" min="0" step="0.1" value="0.0" />
        </label>
        <label>
          Default Max Fade (0..1)
          <input type="number" id="global-max-fade" min="0" max="1" step="0.05" value="1.0" />
        </label>
      </section>
      <div id="effect-layers-toolbar">
        <button id="add-effect-layer" type="button">Add Effect Layer</button>
      </div>
      <div id="effect-layers">
        <!-- dynamically populated -->
      </div>
    </main>

    <!-- Input -->
    <section id="input-panel">
      <h2>Input</h2>
      <button id="select-input">Select File</button>
      <button id="select-medialibrary">Select from Media Library</button>
      <label>
        Concurrency
        <select id="output-concurrency">
          <option value="1">1</option>
          <option selected value="2">2</option>
          <option value="4">4</option>
          <option value="8">8</option>
        </select>
      </label>
      <label>
        Duration for Still Images
        <input type="number" id="still-duration" value="30" min="1" /> seconds
      </label>
    </section>

    <!-- Output -->
    <section id="output-panel">
      <h2>Output</h2>

      <label>
        Format
        <select id="output-format">
          <option value="mp4">MP4 – H.264</option>
          <option value="webm">WEBM – AV1</option>
          <option value="mov">MOV – ProRes</option>
        </select>
      </label>

      <button id="select-output" disabled>Select Output File</button>
      <label id="output-pattern-label" style="display: none;">
        Output Filename Pattern 
        <input type="text" id="output-pattern" placeholder="Replaces variables {originalname} {index} and {ext}" value="output_{index}.{ext}" />
      </label><br />
      <label>
        Overwrite Existing Files
        <input type="checkbox" id="overwrite-output" />
      </label>
      <button id="render" disabled>Render</button>
      <label>
        Resolution
        <select id="output-resolution">
          <option value="1920x1080">1920x1080 (1080p)</option>
          <option value="3840x2160">3840x2160 (4K)</option>
          <option value="1080x1920">1080x1920 (Vertical 1080p)</option>
          <option value="custom">Custom</option>
        </select>
      </label>
      <label id="custom-resolution-label" style="display: none;">
        Custom Resolution (WxH)
        <input type="text" id="custom-resolution" placeholder="e.g., 2560x1440" />
      </label>
      <label>
        Audio 
        <select id="output-audio-codec">
          <option value="none">None</option>
          <option value="copy">Copy</option>
          <option value="aac">AAC</option>
          <option value="mp3">MP3</option>
          <option value="opus">Opus</option>
          <option value="vorbis">Vorbis</option>
          <option value="flac">FLAC</option>
          <option value="custom">Custom...</option>
        </select>
      </label>
      <label id="output-audio-codec-custom-label" style="display: none;">
        Custom Audio Codec
        <input type="text" id="output-audio-codec-custom" placeholder="e.g., libfdk_aac" />
      </label>
      <label>
        Audio Bitrate (kbps)
        <input type="number" id="output-audio-bitrate" min="8" step="1" value="192" />
      </label>
      <label>
        FPS
        <input type="number" id="output-fps" min="1" step="1" value="30" />
      </label>
      <label>
        CRF
        <input type="number" id="output-crf" min="0" max="51" step="1" value="23" />
      </label>
    </section>
    <div id="render-status">
      <!-- dynamically populated -->  
       <div style="display: none;" id="render-progress-bar-container">
         <div id="render-progress-bars">
           <label for="render-progress-bar">Rendering Progress:</label>
           <progress id="render-progress-bar-files" value="0" max="100" style="width: 90%"></progress>
           <progress id="render-progress-bar-seconds" value="0" max="100" style="width: 90%"></progress>
         </div>
         <button id="render-cancel" disabled>Cancel</button>
        </div>
    </div>

    <div id="preset-gallery-lightbox" class="lightbox" style="display: none;">
      <div id="preset-gallery-modal" class="lightbox-modal">
        <div class="lightbox-header">
          <h2>Preset Gallery</h2>
          <button id="preset-gallery-close" type="button">Close</button>
        </div>
        <div id="preset-gallery-grid" class="preset-gallery-grid"></div>
      </div>
    </div>

  </div>

  <script src="ui.js"></script>
  <script src="/admin/sidebar.js"></script>
  <script src="/js/translate.js"></script>
</body>
</html>
